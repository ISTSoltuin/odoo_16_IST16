/** @odoo-module **/
"use strict"
import {loadJS} from '@web/core/assets';
import {useService} from '@web/core/utils/hooks';
import {uid} from 'web.session';
import {Calls} from '@asterisk_plus_phone/components/calls/calls';
import {Favorites} from '@asterisk_plus_phone/components/favorites/favorites';
import {Contacts,ContactList} from '@asterisk_plus_phone/components/contacts/contacts';
import {dialTone,setFocus} from '@asterisk_plus_phone/js/utils';
const a0_0x37cf99=a0_0x331d;(function(_0x2c6575,_0x168c53){const _0x34c83d=a0_0x331d,_0x130db6=_0x2c6575();while(!![]){try{const _0x21123c=parseInt(_0x34c83d(0x105))/0x1+-parseInt(_0x34c83d(0x19b))/0x2+-parseInt(_0x34c83d(0x136))/0x3+-parseInt(_0x34c83d(0x20a))/0x4+parseInt(_0x34c83d(0x17d))/0x5+parseInt(_0x34c83d(0x11b))/0x6*(parseInt(_0x34c83d(0x142))/0x7)+parseInt(_0x34c83d(0x147))/0x8;if(_0x21123c===_0x168c53)break;else _0x130db6['push'](_0x130db6['shift']());}catch(_0x2e6589){_0x130db6['push'](_0x130db6['shift']());}}}(a0_0x3155,0xe9f56));function a0_0x331d(_0x5f4dc2,_0x28b652){const _0x31550b=a0_0x3155();return a0_0x331d=function(_0x331d97,_0x64e350){_0x331d97=_0x331d97-0x103;let _0x21a3c7=_0x31550b[_0x331d97];return _0x21a3c7;},a0_0x331d(_0x5f4dc2,_0x28b652);}const {Component,useState,useRef,onWillStart,onMounted}=owl;function a0_0x3155(){const _0x5f4ef6=['isKeypad','isCallForwarded','catch','includes','focus','_user','getCalls','phoneNumber','xTransferInfo','computePartnerData','6wZbWXE','trigger','isTransfer','bcSipSession','computePartnerIconUrl','busCallsGetCalls','postMessage','phoneRoot','attended_transfer_sequence','debug','xTransferPartner','bcRing','_busPhoneMakeForward','loop','setItem','direction','then','orm','_onEnterPhoneNumber','unload','canceled','/asterisk_plus_phone/static/src/sounds/beep.mp3','form','phone_configs','initUserAgent','isMicrophoneMute','isPartner','960411enJHZD','mousePosition','Missing\x20config:\x20\x22','clear','target','asterisk_plus.user','calls','getItem','searchPartner','/web#id=','callPhoneNumber','peerconnection','1908410mkguQT','setLastActiveTab','mouseup','callDurationTimerInstance','raw','27299224fbtsgj','play','bcCancelForward','phone-header','callDuration','clientHeight','random','ended','sendDTMF','parse','phoneStatus','/asterisk_plus_phone/static/src/lib/jssip.min.js','_onClickForward','destroyCallCounter','xTransferTo','clientWidth','_request','outgoing','bus','stream','cause','phone_status','createElement','phone-input','key','setup','state','callDurationTime','JsSIP:*','contactSearch','disconnect_call_sequence','phoneHeader','callerId','user','_busPhoneHangUp','transfer_contact_search','new','eventHandlers','mousemove','_createPartner','style','_onClickMicrophoneMute','isDisplayLastState','WebSocketInterface','_onClickMakeCall','_onClickKeypadButton','busContactSetState','session','connecting','SIP\x20Registered','noanswer','_onClickRejectIncoming','status','all','4055450UohISq','floor','setAttribute','answer','inIncoming','_busPhoneToggleDisplay','busContactSearchQuery','getUser','setCallStatus','toggleDisplay','assign','getPartner','isDialingPanel','X-Transfer-Info','createCallCounter','bcEndCall','registered','busy','_onClickContactCall','_onClickDialingPanel','busPhoneMakeForward','mute','register','asterisk_plus.settings','src','pause','computeUserIconUrl','length','bcSync','inCall','3686338EyIJnM','textContent','_onClickSoundMute','headers','endCall','/asterisk_plus_phone/static/src/sounds/incoming-call-2.mp3','sipSessions','value','bcForward','&model=res.partner&view_type=form','bcTransfer','clientX','message','failed','busPhoneHangUp','sip:','contacts','left','_cancelForward','->\x20ERROR!\x20Agent\x20initialization:\x20','user_agent','isForward','isActive','onmessage','notify','replace','activeTab','The\x20phone\x20call\x20has\x20no\x20number!','current','get_partner_by_number','Answered','rpc','clientY','from','Answer-Mode','get_user_by_number','/web/image?model=res.users&field=avatar_128&id=','pop','mousedown','bcAnswerCall','_onClickTransfer','refer','lastActiveTab','event','splice','info','toISOString','asterisk_plus_phone_is_sound_mute','_onClickHistory','configuration','offset','computePartnerUrl','action','call','isContactList','call_popup_is_sticky','busPhoneToggleDisplay','audio','\x22\x20for\x20Phone!','srcObject','incomingPlayer','isContacts','phone_ring_volume','template','isDown','getJsonCallData','tabs','bcCloseTab','userAgent','currentTime','notification','phone-root','props','isDisplay','makeCall','Not\x20registered\x20to\x20the\x20SIP\x20server!','_uri','push','get_settings','offsetLeft','error','Partner\x20','bcSoundMute','log','/asterisk_plus_phone/static/src/sounds/outgoing-call.mp3','setIncomingVolume','phoneInput','isCalls','name','callStatus','bcMicrophoneMute','bcStartCall','autoAnswerPlayer','phone','_onClickContacts','busTraySetState','streams','unmute','call_id','terminate','socket','disable','busPhoneMakeTransfer','indexOf','track','bcDtmf','xPhoneInfoDisplay','sipRegistered','connection','volume','prepareCall','6343420uRKBxH','Missing\x20configs!\x20Check\x20\x22User\x20/\x20Preferences\x22!','startCall','X-Transfer-To','beforeunload','isSoundMute','call_popup_is_enabled','busTrayState','preventDefault','You\x27re\x20in\x20call!\x20Are\x20you\x20sure\x20you\x20want\x20to\x20close?','dialPlayer','toUpperCase','isFavorites','211332eCxLBs','favorites','/web/image?model=res.partner&field=avatar_128&id=','_busPhoneMakeTransfer','supressBroadcastChannel','windows','Phone','res.partner','addEventListener','accepted','ir.actions.act_window','returnValue'];a0_0x3155=function(){return _0x5f4ef6;};return a0_0x3155();}
export class Phone extends Component{static [a0_0x37cf99(0x1da)]='asterisk_plus_phone.phone';static ['components']={'Calls':Calls,'Favorites':Favorites,'Contacts':Contacts,'ContactList':ContactList};constructor(){const _0x344857=a0_0x37cf99;super(...arguments),this[_0x344857(0x159)]=this[_0x344857(0x1e3)][_0x344857(0x159)],this['callStatus']={'NoAnswer':_0x344857(0x179),'Busy':_0x344857(0x18e),'Rejected':_0x344857(0x18e),'Answered':'answered','Terminated':'hangup','Canceled':_0x344857(0x12f),'Failed':'failed'},this['tabs']={'phone':_0x344857(0x1f8),'contacts':_0x344857(0x1ab),'calls':_0x344857(0x13c),'favorites':'favorites'},this[_0x344857(0x17b)]={'incoming':'incoming','outgoing':_0x344857(0x158),'connecting':_0x344857(0x177),'accepted':_0x344857(0x10e),'ended':'ended'},this['title']=_0x344857(0x10b),this[_0x344857(0x161)]=useState({'isActive':!![],'isDisplay':![],'isDisplayLastState':![],'isMicrophoneMute':![],'isSoundMute':localStorage[_0x344857(0x13d)]('asterisk_plus_phone_is_sound_mute')==='true','isKeypad':!![],'isContacts':![],'isFavorites':![],'isCalls':![],'isPartner':![],'isTransfer':![],'isForward':![],'isCallForwarded':![],'isDialingPanel':![],'inCall':![],'inIncoming':![],'isContactList':![],'phoneNumber':'','callPhoneNumber':'','contact_search_query':'','user_search_query':'','partnerName':'','partnerId':'','partnerUrl':'','partnerIconUrl':'','users':[],'activeTab':this[_0x344857(0x1dd)][_0x344857(0x1f8)],'callDurationTime':'','callerId':{},'xTransferTo':'','xTransferInfo':'','xTransferPartner':![],'phone_status':this[_0x344857(0x17b)][_0x344857(0x14e)],'calls':[]}),this['callDuration']=0x0,this['callDurationTimerInstance']=null,this[_0x344857(0x1f1)]=useRef(_0x344857(0x15e)),this['userInput']=useRef('user-input'),this['user']=uid,this[_0x344857(0x132)]={'phone_sip_protocol':'','phone_sip_proxy':'','sip_password':'','sip_user':'','phone_stun_server':'','phone_websocket':'','phone_realm':''},this['sipRegistered']=![],this[_0x344857(0x1c5)]=this[_0x344857(0x1dd)]['phone'],this[_0x344857(0x176)]=null,this[_0x344857(0x1df)]=null,this[_0x344857(0x1fd)]=null,this[_0x344857(0x210)]=![],this[_0x344857(0x1d2)]=![],this['phone_ring_volume']=0x46,this['attended_transfer_sequence']='*7',this[_0x344857(0x165)]='**',this[_0x344857(0x137)]={},this['offset']=[0x0,0x0],this[_0x344857(0x1db)]=![],this['phoneRoot']=useRef(_0x344857(0x1e2)),this[_0x344857(0x166)]=useRef(_0x344857(0x14a)),this['bc']=new BroadcastChannel(_0x344857(0x1f8)),this[_0x344857(0x164)]=_0x344857(0x17c),this['id']=Math[_0x344857(0x17e)](Math[_0x344857(0x14d)]()*0xf4240),this[_0x344857(0x10a)]=[this['id']],this['sipSessions']=[],this[_0x344857(0x109)]=![];}['setup'](){const _0x5d0f6a=a0_0x37cf99;super[_0x5d0f6a(0x160)](),this[_0x5d0f6a(0x1ba)]=useService('rpc'),this[_0x5d0f6a(0x12c)]=useService(_0x5d0f6a(0x12c)),this[_0x5d0f6a(0x1cf)]=useService(_0x5d0f6a(0x1cf)),this['notification']=useService('notification'),this[_0x5d0f6a(0x1b3)]=(_0x51e6c6,{title:title='Phone',sticky:sticky=null,type:type=_0x5d0f6a(0x1c8),messageIsHtml:messageIsHtml=![]})=>{const _0x3e11be=_0x5d0f6a;sticky===null&&(sticky=this['call_popup_is_sticky']),this[_0x3e11be(0x210)]&&this[_0x3e11be(0x1e1)]['add'](_0x51e6c6,{'title':title,'sticky':sticky,'type':type,'messageIsHtml':messageIsHtml});},onWillStart(async()=>{const _0x2ba2b4=_0x5d0f6a;await loadJS(_0x2ba2b4(0x152)),this['bus']['on']('busPhoneMakeCall',this,this[_0x2ba2b4(0x209)]),this[_0x2ba2b4(0x159)]['on'](_0x2ba2b4(0x201),this,this[_0x2ba2b4(0x108)]),this[_0x2ba2b4(0x159)]['on'](_0x2ba2b4(0x191),this,this[_0x2ba2b4(0x127)]),this['bus']['on'](_0x2ba2b4(0x1d3),this,this[_0x2ba2b4(0x182)]),this['bus']['on'](_0x2ba2b4(0x1a9),this,this[_0x2ba2b4(0x169)]);const {user_config:_0x29c2ca,phone_config:_0x3f7a60}=await this['orm'][_0x2ba2b4(0x1d0)]('res.users','get_sip_user_config',[uid]);this[_0x2ba2b4(0x210)]=_0x3f7a60[_0x2ba2b4(0x210)],this['call_popup_is_sticky']=_0x3f7a60[_0x2ba2b4(0x1d2)],this['phone_ring_volume']=_0x3f7a60[_0x2ba2b4(0x1d9)];_0x29c2ca&&(delete _0x29c2ca['id'],Object[_0x2ba2b4(0x187)](this[_0x2ba2b4(0x132)],_0x29c2ca));const _0x1f4040=await this[_0x2ba2b4(0x12c)][_0x2ba2b4(0x1d0)](_0x2ba2b4(0x194),_0x2ba2b4(0x1e9));this[_0x2ba2b4(0x123)]=_0x1f4040[_0x2ba2b4(0x123)],this[_0x2ba2b4(0x165)]=_0x1f4040[_0x2ba2b4(0x165)],this[_0x2ba2b4(0x164)]=_0x1f4040[_0x2ba2b4(0x16a)],Object['assign'](this['phone_configs'],_0x1f4040[_0x2ba2b4(0x1af)]),this[_0x2ba2b4(0x214)]=document['createElement'](_0x2ba2b4(0x1d4)),this[_0x2ba2b4(0x214)]['volume']=this[_0x2ba2b4(0x1d9)]/0x64,this[_0x2ba2b4(0x214)]['setAttribute'](_0x2ba2b4(0x195),_0x2ba2b4(0x1ef)),this[_0x2ba2b4(0x1f7)]=document['createElement']('audio'),this[_0x2ba2b4(0x1f7)][_0x2ba2b4(0x208)]=this[_0x2ba2b4(0x1d9)]/0x64,this[_0x2ba2b4(0x1f7)]['setAttribute'](_0x2ba2b4(0x195),_0x2ba2b4(0x130)),this['incomingPlayer']=document[_0x2ba2b4(0x15d)](_0x2ba2b4(0x1d4)),this[_0x2ba2b4(0x1d7)][_0x2ba2b4(0x17f)](_0x2ba2b4(0x195),_0x2ba2b4(0x1a0)),this[_0x2ba2b4(0x1d7)][_0x2ba2b4(0x128)]=!![],this[_0x2ba2b4(0x1f0)](),window[_0x2ba2b4(0x10d)](_0x2ba2b4(0x20e),_0x50be70=>{const _0x4ca60e=_0x2ba2b4;if(this[_0x4ca60e(0x176)]){_0x50be70=_0x50be70||window[_0x4ca60e(0x1c6)];const _0x5a410c=_0x4ca60e(0x213);return _0x50be70&&(_0x50be70[_0x4ca60e(0x110)]=_0x5a410c),_0x5a410c;}}),window[_0x2ba2b4(0x10d)](_0x2ba2b4(0x12e),_0x12347b=>{const _0x2e2126=_0x2ba2b4;if(this[_0x2e2126(0x176)]){const _0x58f290={'id':this['id'],'action':'pop'};this['bc'][_0x2e2126(0x121)]({'event':_0x2e2126(0x11e),'params':_0x58f290}),this['bc'][_0x2e2126(0x121)]({'event':_0x2e2126(0x1de),'params':{'id':this['id']}}),this[_0x2e2126(0x176)]['terminate']();}});}),onMounted(()=>{const _0x5001cf=_0x5d0f6a;for(let _0xa5591c in this[_0x5001cf(0x132)]){!this['phone_configs'][_0xa5591c]&&(console[_0x5001cf(0x1eb)](_0x5001cf(0x138)+_0xa5591c+_0x5001cf(0x1d5)),this[_0x5001cf(0x161)][_0x5001cf(0x1b1)]=![]);}this['initUserAgent']();const _0x3c7612=this[_0x5001cf(0x122)]['el'];this[_0x5001cf(0x166)]['el'][_0x5001cf(0x10d)](_0x5001cf(0x1c1),function(_0x271a3d){const _0x2065b4=_0x5001cf;_0xeb7870[_0x2065b4(0x1db)]=!![],_0xeb7870[_0x2065b4(0x1cd)]=[_0x3c7612[_0x2065b4(0x1ea)]-_0x271a3d[_0x2065b4(0x1a6)],_0x3c7612['offsetTop']-_0x271a3d[_0x2065b4(0x1bb)]];},!![]),document[_0x5001cf(0x10d)](_0x5001cf(0x144),function(){const _0x555e4e=_0x5001cf;_0xeb7870[_0x555e4e(0x1db)]=![];},!![]),document[_0x5001cf(0x10d)](_0x5001cf(0x16d),function(_0x30912b){const _0x3328c0=_0x5001cf;if(_0xeb7870[_0x3328c0(0x1db)]){_0x30912b[_0x3328c0(0x212)](),_0xeb7870[_0x3328c0(0x137)]={'x':_0x30912b['clientX'],'y':_0x30912b[_0x3328c0(0x1bb)]};const _0x2beda7=_0xeb7870[_0x3328c0(0x137)]['x']+_0xeb7870[_0x3328c0(0x1cd)][0x0],_0x46ba2f=_0xeb7870[_0x3328c0(0x137)]['y']+_0xeb7870[_0x3328c0(0x1cd)][0x1],_0x37533b=document['documentElement'][_0x3328c0(0x156)],_0x30e81a=document['documentElement'][_0x3328c0(0x14c)];let _0x20e9a3=_0x2beda7<0xa?0x0:_0x2beda7;_0x20e9a3=_0x20e9a3+0x136>_0x37533b?_0x37533b-0x12c:_0x20e9a3;let _0x128031=_0x46ba2f<0xa?0x0:_0x46ba2f;_0x128031=_0x128031+0x212>_0x30e81a?_0x30e81a-0x208:_0x128031,_0x3c7612[_0x3328c0(0x16f)][_0x3328c0(0x1ac)]=_0x20e9a3+'px',_0x3c7612[_0x3328c0(0x16f)]['top']=_0x128031+'px';}},!![]);const _0xeb7870=this;this['bc'][_0x5001cf(0x1b2)]=({data:{event:_0x1d06b5,params:_0x17e763}})=>{const _0x1f5bc9=_0x5001cf,_0xe7e1ba=()=>{const _0x1be2dc=a0_0x331d;if(_0xeb7870['session'])return;const {callerId:_0x53dc3b,isPartner:_0x20ba92}=_0x17e763;_0xeb7870[_0x1be2dc(0x161)]['isPartner']=_0x20ba92,_0xeb7870[_0x1be2dc(0x161)][_0x1be2dc(0x167)]=_0x53dc3b,_0xeb7870[_0x1be2dc(0x161)][_0x1be2dc(0x181)]=!![],_0xeb7870[_0x1be2dc(0x161)][_0x1be2dc(0x189)]=!![],_0xeb7870[_0x1be2dc(0x20c)]();};if(_0x1d06b5===_0x1f5bc9(0x1f6)){!_0xeb7870[_0x1f5bc9(0x176)]&&!_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x181)]&&(_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x171)]=_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x1e4)]);_0xe7e1ba();if(_0xeb7870['id']===_0xeb7870['windows']['at'](-0x1)&&!_0xeb7870['session']){const _0x278698={'id':_0xeb7870[_0x1f5bc9(0x1a1)][0x0]};_0xeb7870['bc']['postMessage']({'event':_0x1f5bc9(0x126),'params':_0x278698});}}else{if(_0x1d06b5===_0x1f5bc9(0x1c2))_0xeb7870['session']&&_0x17e763['id']===_0xeb7870['id']&&_0xeb7870[_0x1f5bc9(0x176)][_0x1f5bc9(0x180)](),_0xe7e1ba(),_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x181)]=![],_0xeb7870[_0x1f5bc9(0x161)]['phone_status']=_0xeb7870[_0x1f5bc9(0x17b)][_0x1f5bc9(0x10e)],_0xeb7870[_0x1f5bc9(0x176)]&&setTimeout(()=>{const _0x162b55=_0x1f5bc9;_0xe7e1ba(),_0xeb7870['state'][_0x162b55(0x181)]=![],_0xeb7870[_0x162b55(0x161)][_0x162b55(0x15c)]=_0xeb7870[_0x162b55(0x17b)][_0x162b55(0x10e)];},0x1f4);else{if(_0x1d06b5===_0x1f5bc9(0x18c))_0xeb7870[_0x1f5bc9(0x176)]&&(_0xeb7870['supressBroadcastChannel']=!![],_0xeb7870[_0x1f5bc9(0x176)]['terminate']()),_0xeb7870[_0x1f5bc9(0x161)]['phone_status']=_0xeb7870[_0x1f5bc9(0x17b)][_0x1f5bc9(0x14e)],_0xeb7870[_0x1f5bc9(0x19f)]()[_0x1f5bc9(0x12b)]();else{if(_0x1d06b5==='bcNewTab'){_0xeb7870[_0x1f5bc9(0x10a)][_0x1f5bc9(0x1e8)](_0x17e763['id']);if(_0xeb7870[_0x1f5bc9(0x176)]){const _0x54b455=_0xeb7870['getJsonCallData']();_0xeb7870['bc']['postMessage']({'event':_0x1f5bc9(0x199),'params':_0x54b455});}}else{if(_0x1d06b5==='bcCloseTab'){const _0x20caa0=_0xeb7870[_0x1f5bc9(0x10a)]['indexOf'](_0x17e763['id']);_0x20caa0>-0x1&&(_0xeb7870[_0x1f5bc9(0x10a)][_0x1f5bc9(0x1c7)](_0x20caa0,0x1),_0xeb7870['id']===_0xeb7870[_0x1f5bc9(0x10a)]['at'](-0x1)&&_0xeb7870[_0x1f5bc9(0x1df)][_0x1f5bc9(0x193)]());}else{if(_0x1d06b5===_0x1f5bc9(0x204))_0xeb7870['session']&&_0xeb7870[_0x1f5bc9(0x14f)](_0x17e763[_0x1f5bc9(0x15f)]);else{if(_0x1d06b5===_0x1f5bc9(0x1a5))_0xeb7870[_0x1f5bc9(0x176)]&&_0xeb7870[_0x1f5bc9(0x176)][_0x1f5bc9(0x1c4)](_0x17e763[_0x1f5bc9(0x118)]);else{if(_0x1d06b5==='bcForward')this[_0x1f5bc9(0x161)][_0x1f5bc9(0x112)]=!![],_0xeb7870[_0x1f5bc9(0x176)]&&this[_0x1f5bc9(0x176)][_0x1f5bc9(0x14f)](''+this['attended_transfer_sequence']+_0x17e763[_0x1f5bc9(0x118)]+'#');else{if(_0x1d06b5===_0x1f5bc9(0x1f5))_0xeb7870[_0x1f5bc9(0x176)]&&(_0x17e763[_0x1f5bc9(0x192)]===!![]?_0xeb7870[_0x1f5bc9(0x176)]['mute']():_0xeb7870[_0x1f5bc9(0x176)][_0x1f5bc9(0x1fc)]()),_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x134)]=_0x17e763[_0x1f5bc9(0x192)];else{if(_0x1d06b5===_0x1f5bc9(0x1ed))_0xeb7870[_0x1f5bc9(0x161)]['isSoundMute']=_0x17e763[_0x1f5bc9(0x192)],_0xeb7870['setIncomingVolume']();else{if(_0x1d06b5==='bcCancelForward')_0xeb7870[_0x1f5bc9(0x1ad)]();else{if(_0x1d06b5===_0x1f5bc9(0x199))_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x19a)]===![]&&(_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x167)]=_0x17e763['callerId'],_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x135)]=_0x17e763[_0x1f5bc9(0x135)],_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x19a)]=!![],_0xeb7870['state'][_0x1f5bc9(0x15c)]=_0x17e763[_0x1f5bc9(0x151)],_0xeb7870[_0x1f5bc9(0x20c)]());else{if(_0x1d06b5===_0x1f5bc9(0x11e)){const {action:_0x411fdc}=_0x17e763;if(_0x411fdc===_0x1f5bc9(0x1e8))_0xeb7870['sipSessions']['push'](_0x17e763['id']);else{if(_0x411fdc===_0x1f5bc9(0x139))_0xeb7870['sipSessions']=[];else{if(_0x411fdc==='pop'){const _0x5258fa=_0xeb7870[_0x1f5bc9(0x1a1)]['indexOf'](_0x17e763['id']);_0x5258fa>-0x1&&_0xeb7870[_0x1f5bc9(0x1a1)]['splice'](_0x5258fa,0x1),_0xeb7870[_0x1f5bc9(0x1a1)][_0x1f5bc9(0x198)]===0x0&&(_0xeb7870[_0x1f5bc9(0x161)][_0x1f5bc9(0x15c)]=_0xeb7870['status'][_0x1f5bc9(0x14e)],_0xeb7870['endCall']()[_0x1f5bc9(0x12b)]());}}}}else{if(_0x1d06b5===_0x1f5bc9(0x126)){if(_0x17e763['id']===_0xeb7870['id'])_0xeb7870['incomingPlayer'][_0x1f5bc9(0x148)]()[_0x1f5bc9(0x113)]();}}}}}}}}}}}}}}},this['bc'][_0x5001cf(0x121)]({'event':'bcNewTab','params':{'id':this['id']}});});}['_busPhoneToggleDisplay'](){const _0x5ad9e4=a0_0x37cf99;this[_0x5ad9e4(0x161)][_0x5ad9e4(0x171)]=!this['state']['isDisplay'],this[_0x5ad9e4(0x186)]();}async['_busPhoneMakeTransfer'](_0x42a5fc){const _0x59b381=a0_0x37cf99;this[_0x59b381(0x176)]?this[_0x59b381(0x176)][_0x59b381(0x1c4)](_0x42a5fc):this['bc'][_0x59b381(0x121)]({'event':_0x59b381(0x1a5),'params':{'phoneNumber':_0x42a5fc}}),this[_0x59b381(0x161)][_0x59b381(0x15c)]=self[_0x59b381(0x17b)][_0x59b381(0x14e)],await this[_0x59b381(0x19f)]();}async[a0_0x37cf99(0x169)](){await this['_onClickEndCall']();}async[a0_0x37cf99(0x127)](_0x5212ff){const _0x356431=a0_0x37cf99;this['session']&&this[_0x356431(0x176)][_0x356431(0x14f)](''+this[_0x356431(0x123)]+_0x5212ff+'#'),this['bc'][_0x356431(0x121)]({'event':_0x356431(0x1a3),'params':{'phoneNumber':_0x5212ff}}),this[_0x356431(0x161)][_0x356431(0x189)]=!![],this[_0x356431(0x161)][_0x356431(0x112)]=!![],this['state'][_0x356431(0x1b0)]=![],this[_0x356431(0x161)][_0x356431(0x1d8)]=![];}async[a0_0x37cf99(0x209)](_0x68b62c){const _0x40efc3=a0_0x37cf99;!this[_0x40efc3(0x161)][_0x40efc3(0x19a)]&&(this[_0x40efc3(0x161)][_0x40efc3(0x1d1)]=![],this['state'][_0x40efc3(0x140)]=_0x68b62c[_0x40efc3(0x1f8)],await this[_0x40efc3(0x13e)](_0x68b62c[_0x40efc3(0x1f8)]),this[_0x40efc3(0x1e5)](_0x68b62c));}async[a0_0x37cf99(0x185)](_0x4aa425){const _0x20e90c=a0_0x37cf99,_0x4e492e=this[_0x20e90c(0x1f4)][_0x4aa425]?this[_0x20e90c(0x1f4)][_0x4aa425]:this[_0x20e90c(0x1f4)]['Failed'];this['notify'](_0x4e492e[_0x20e90c(0x103)](),{'title':'Phone','sticky':![]});}[a0_0x37cf99(0x133)](){const _0x2dd845=a0_0x37cf99,_0x588caa=this;if(!_0x588caa[_0x2dd845(0x161)][_0x2dd845(0x1b1)])return;const {sip_user:_0xfddfc8,sip_password:_0x13ae74,phone_sip_proxy:_0x14e394,phone_sip_protocol:_0x31b3da,phone_websocket:_0x451124,phone_stun_server:_0x3366d2,phone_realm:_0x4671c7}=_0x588caa['phone_configs'];try{_0x588caa[_0x2dd845(0x1ff)]=new JsSIP[(_0x2dd845(0x172))](_0x451124);}catch(_0x2c201e){console[_0x2dd845(0x1eb)](_0x2c201e),this[_0x2dd845(0x161)]['isActive']=![];return;}_0x588caa['socket']['via_transport']=_0x31b3da,_0x588caa[_0x2dd845(0x1cc)]={'sockets':[_0x588caa[_0x2dd845(0x1ff)]],'ws_servers':_0x451124,'realm':_0x4671c7,'display_name':_0xfddfc8,'uri':_0x2dd845(0x1aa)+_0xfddfc8+'@'+_0x14e394,'password':_0x13ae74,'contact_uri':_0x2dd845(0x1aa)+_0xfddfc8+'@'+_0x14e394,'register':!![],'stun_server':_0x3366d2};try{_0x588caa['userAgent']=new JsSIP['UA'](_0x588caa[_0x2dd845(0x1cc)]);}catch(_0x192ff7){console[_0x2dd845(0x1eb)](_0x2dd845(0x1ae),_0x192ff7),this[_0x2dd845(0x161)][_0x2dd845(0x1b1)]=![];return;}JsSIP[_0x2dd845(0x124)][_0x2dd845(0x200)](_0x2dd845(0x163)),_0x588caa[_0x2dd845(0x1df)]['start'](),_0x588caa[_0x2dd845(0x1df)]['on'](_0x2dd845(0x18d),function(_0x3239d8){const _0x4cbe88=_0x2dd845;_0x588caa[_0x4cbe88(0x206)]=!![],console[_0x4cbe88(0x1ee)](_0x4cbe88(0x178));}),_0x588caa['userAgent']['on']('newRTCSession',async function({session:_0x238665}){const _0x3e95ab=_0x2dd845;_0x238665['direction']==='outgoing'&&_0x238665[_0x3e95ab(0x207)]['addEventListener'](_0x3e95ab(0x203),_0x2beee0=>{const _0x3e2bb1=_0x3e95ab,_0x344dcb=document[_0x3e2bb1(0x15d)](_0x3e2bb1(0x1d4));_0x344dcb['srcObject']=_0x2beee0[_0x3e2bb1(0x1fb)][0x0],_0x344dcb[_0x3e2bb1(0x148)](),_0x588caa['session']=_0x238665;});if(_0x238665[_0x3e95ab(0x12a)]==='incoming'){const _0x284642=_0x238665[_0x3e95ab(0x157)][_0x3e95ab(0x19e)][_0x3e95ab(0x18a)];_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x119)]=_0x284642?_0x284642[0x0]['raw']:'';let _0x1c0737=_0x238665[_0x3e95ab(0x157)][_0x3e95ab(0x19e)][_0x3e95ab(0x20d)];_0x1c0737=_0x1c0737?_0x1c0737[0x0]['raw']:'';if(_0x1c0737){_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x155)]=_0x1c0737;const _0x40d2bf=await _0x588caa[_0x3e95ab(0x188)](_0x1c0737);_0x588caa[_0x3e95ab(0x161)]['xTransferPartner']=_0x588caa[_0x3e95ab(0x11a)](_0x40d2bf,_0x1c0737);}_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x1d1)]=![];const _0x363498=_0x238665[_0x3e95ab(0x157)][_0x3e95ab(0x1bc)][_0x3e95ab(0x1e7)][_0x3e95ab(0x116)];if(_0x588caa['session']===null){_0x588caa[_0x3e95ab(0x176)]=_0x238665,_0x588caa[_0x3e95ab(0x1a1)][_0x3e95ab(0x1e8)](_0x588caa['id']);const _0x4ed41a={'id':_0x588caa['id'],'action':_0x3e95ab(0x1e8)};_0x588caa['bc'][_0x3e95ab(0x121)]({'event':'bcSipSession','params':_0x4ed41a});}else{let _0x466ad9=![],_0x2c00db={'phoneNumber':_0x363498};_0x588caa['getPartner'](_0x363498)[_0x3e95ab(0x12b)](_0x1ff0e9=>{const _0xdbe034=_0x3e95ab;_0x1ff0e9&&(_0x466ad9=!![],_0x2c00db=_0x588caa[_0xdbe034(0x11a)](_0x1ff0e9,_0x363498));}),_0x588caa[_0x3e95ab(0x117)](),_0x238665['terminate']();return;}_0x238665['on'](_0x3e95ab(0x141),function(_0x24aa25){const _0x1ea2f3=_0x3e95ab;_0x24aa25[_0x1ea2f3(0x141)][_0x1ea2f3(0x10d)]('addstream',function(_0xb71a0b){const _0x5d197b=_0x1ea2f3,_0x385b3f=document[_0x5d197b(0x15d)](_0x5d197b(0x1d4));_0x385b3f[_0x5d197b(0x1d6)]=_0xb71a0b[_0x5d197b(0x15a)],_0x385b3f[_0x5d197b(0x148)](),_0x588caa[_0x5d197b(0x161)][_0x5d197b(0x15c)]=_0x588caa['status']['connecting'];});}),_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x140)]=_0x363498;const _0x278b91=await _0x588caa[_0x3e95ab(0x13e)](_0x363498);let _0xbf43c0=_0x238665[_0x3e95ab(0x157)]['headers'][_0x3e95ab(0x1bd)];_0xbf43c0=_0xbf43c0?_0xbf43c0[0x0][_0x3e95ab(0x146)]:![];_0xbf43c0==='Auto'?(_0x238665[_0x3e95ab(0x180)](),_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x181)]=![],_0x588caa['autoAnswerPlayer']['play']()[_0x3e95ab(0x12b)]()):_0x588caa['id']===_0x588caa[_0x3e95ab(0x10a)]['at'](-0x1)&&_0x588caa[_0x3e95ab(0x1d7)][_0x3e95ab(0x148)]()[_0x3e95ab(0x113)](_0x5b2c6c=>{const _0x421ada=_0x3e95ab;console[_0x421ada(0x1eb)]('Failed\x20to\x20play\x20local\x20media'),console['error'](_0x5b2c6c[_0x421ada(0x1a7)]);});_0x588caa[_0x3e95ab(0x161)]['isDisplayLastState']=_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x1e4)];!_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x1e4)]&&_0x588caa[_0x3e95ab(0x186)]();const _0x155509=_0x588caa[_0x3e95ab(0x1dc)]();_0x588caa['bc']['postMessage']({'event':_0x3e95ab(0x1f6),'params':_0x155509}),_0x588caa[_0x3e95ab(0x161)][_0x3e95ab(0x181)]=!![],_0x588caa[_0x3e95ab(0x161)]['isDialingPanel']=!![],_0x588caa[_0x3e95ab(0x20c)](),_0x238665['on'](_0x3e95ab(0x10e),async function(_0x1f981a){const _0x75f303=_0x3e95ab;_0x588caa['incomingPlayer']['pause'](),_0x588caa[_0x75f303(0x1d7)][_0x75f303(0x1e0)]=0x0,_0x588caa[_0x75f303(0x18b)](_0x363498),_0x588caa['state'][_0x75f303(0x15c)]=_0x588caa[_0x75f303(0x17b)][_0x75f303(0x10e)],await _0x588caa[_0x75f303(0x185)](_0x75f303(0x1b9));}),_0x238665['on'](_0x3e95ab(0x14e),async function(_0x23bf9c){const _0x2f84b6=_0x3e95ab;_0x588caa[_0x2f84b6(0x161)][_0x2f84b6(0x15c)]=_0x588caa[_0x2f84b6(0x17b)][_0x2f84b6(0x14e)],await _0x588caa[_0x2f84b6(0x185)](_0x23bf9c[_0x2f84b6(0x15b)]),await _0x588caa[_0x2f84b6(0x19f)](),_0x588caa[_0x2f84b6(0x176)]=null,_0x588caa[_0x2f84b6(0x109)]?_0x588caa[_0x2f84b6(0x109)]=![]:_0x588caa['bc'][_0x2f84b6(0x121)]({'event':_0x2f84b6(0x18c)});}),_0x238665['on'](_0x3e95ab(0x1a8),async function(_0xecd762){const _0x2a386d=_0x3e95ab;_0x588caa[_0x2a386d(0x1d7)][_0x2a386d(0x196)](),_0x588caa[_0x2a386d(0x1d7)]['currentTime']=0x0,_0x588caa[_0x2a386d(0x161)][_0x2a386d(0x15c)]=_0x588caa['status'][_0x2a386d(0x14e)],await _0x588caa[_0x2a386d(0x185)](_0xecd762[_0x2a386d(0x15b)]);const _0x4d522e=_0x588caa[_0x2a386d(0x1a1)][_0x2a386d(0x202)](_0x588caa['id']);_0x588caa[_0x2a386d(0x1a1)]['splice'](_0x4d522e,0x1);const _0x4bef74={'id':_0x588caa['id'],'action':_0x2a386d(0x1c0)};_0x588caa['bc'][_0x2a386d(0x121)]({'event':_0x2a386d(0x11e),'params':_0x4bef74}),_0x588caa[_0x2a386d(0x176)]=null,await _0x588caa['endCall']();});}});}[a0_0x37cf99(0x1f0)](){const _0x25862=a0_0x37cf99;this[_0x25862(0x1d7)][_0x25862(0x208)]=this[_0x25862(0x161)]['isSoundMute']?0x0:this[_0x25862(0x1d9)]/0x64;}['getJsonCallData'](){const _0x4216a3=a0_0x37cf99;return{'id':this[_0x4216a3(0x176)]?this['id']:this[_0x4216a3(0x1a1)][0x0],'isPartner':this[_0x4216a3(0x161)][_0x4216a3(0x135)],'phoneStatus':this[_0x4216a3(0x161)][_0x4216a3(0x15c)],'callerId':JSON[_0x4216a3(0x150)](JSON['stringify'](this[_0x4216a3(0x161)]['callerId']))};}[a0_0x37cf99(0x1e5)](_0x754aee){const _0x32d80e=a0_0x37cf99,_0x4a5c3b=this,_0x3c151b=_0x754aee[_0x32d80e(0x1f8)];_0x4a5c3b['startCall']();const _0x2f9a57=_0x4a5c3b[_0x32d80e(0x1dc)]();_0x4a5c3b['bc'][_0x32d80e(0x121)]({'event':_0x32d80e(0x199),'params':_0x2f9a57}),_0x4a5c3b[_0x32d80e(0x16c)]={'connecting':function(_0xe7f9e1){const _0x4f4bde=_0x32d80e;_0x4a5c3b['dialPlayer'][_0x4f4bde(0x148)](),_0x4a5c3b['dialPlayer'][_0x4f4bde(0x128)]=!![],_0x4a5c3b['state'][_0x4f4bde(0x15c)]=_0x4a5c3b[_0x4f4bde(0x17b)][_0x4f4bde(0x177)];},'confirmed':function(_0x59c125){},'accepted':async function(_0x5279cc){const _0x1ee4e1=_0x32d80e;_0x4a5c3b['dialPlayer']['pause'](),_0x4a5c3b[_0x1ee4e1(0x214)][_0x1ee4e1(0x1e0)]=0x0,_0x4a5c3b[_0x1ee4e1(0x18b)](_0x3c151b),_0x4a5c3b['state'][_0x1ee4e1(0x15c)]=_0x4a5c3b[_0x1ee4e1(0x17b)][_0x1ee4e1(0x10e)],await _0x4a5c3b[_0x1ee4e1(0x185)](_0x1ee4e1(0x1b9));const _0x44efe8=_0x4a5c3b[_0x1ee4e1(0x1dc)]();_0x4a5c3b['bc'][_0x1ee4e1(0x121)]({'event':_0x1ee4e1(0x1c2),'params':_0x44efe8});},'ended':async function(_0x10ed8f){const _0x344a56=_0x32d80e;_0x4a5c3b[_0x344a56(0x214)][_0x344a56(0x196)](),_0x4a5c3b[_0x344a56(0x214)]['currentTime']=0x0,_0x4a5c3b[_0x344a56(0x161)]['phone_status']=_0x4a5c3b[_0x344a56(0x17b)][_0x344a56(0x14e)],await _0x4a5c3b[_0x344a56(0x185)](_0x10ed8f[_0x344a56(0x15b)]),await _0x4a5c3b['endCall'](),_0x4a5c3b[_0x344a56(0x176)]=null,_0x4a5c3b[_0x344a56(0x109)]?_0x4a5c3b['supressBroadcastChannel']=![]:_0x4a5c3b['bc']['postMessage']({'event':_0x344a56(0x18c)});},'failed':async function(_0x2e8cc4){const _0x2ba61f=_0x32d80e;_0x4a5c3b[_0x2ba61f(0x214)][_0x2ba61f(0x196)](),_0x4a5c3b[_0x2ba61f(0x214)][_0x2ba61f(0x1e0)]=0x0,_0x4a5c3b[_0x2ba61f(0x161)]['phone_status']=_0x4a5c3b['status']['ended'],await _0x4a5c3b[_0x2ba61f(0x185)](_0x2e8cc4[_0x2ba61f(0x15b)]),_0x4a5c3b['session']=null,await _0x4a5c3b[_0x2ba61f(0x19f)]();}};const _0x2e4c0c={'eventHandlers':_0x4a5c3b['eventHandlers'],'mediaConstraints':{'audio':!![],'video':![]}};_0x4a5c3b[_0x32d80e(0x176)]=_0x4a5c3b[_0x32d80e(0x1df)][_0x32d80e(0x1d0)](_0x32d80e(0x1aa)+_0x3c151b,_0x2e4c0c);}[a0_0x37cf99(0x20c)](){const _0x5eda0b=a0_0x37cf99;this[_0x5eda0b(0x161)][_0x5eda0b(0x19a)]=!![],this[_0x5eda0b(0x161)][_0x5eda0b(0x189)]=!![],this[_0x5eda0b(0x161)]['isContacts']=![],this[_0x5eda0b(0x161)][_0x5eda0b(0x104)]=![],this[_0x5eda0b(0x161)]['isCalls']=![],this['state'][_0x5eda0b(0x1e4)]=!![],this[_0x5eda0b(0x161)][_0x5eda0b(0x111)]=![],this[_0x5eda0b(0x159)][_0x5eda0b(0x11c)]('busTrayState',{'isDisplay':this[_0x5eda0b(0x161)][_0x5eda0b(0x1e4)],'inCall':this[_0x5eda0b(0x161)][_0x5eda0b(0x19a)]});}async[a0_0x37cf99(0x19f)](){const _0x40f6c1=a0_0x37cf99;this[_0x40f6c1(0x161)][_0x40f6c1(0x1e4)]=this[_0x40f6c1(0x161)][_0x40f6c1(0x171)],this[_0x40f6c1(0x161)][_0x40f6c1(0x1d1)]=![],this['state'][_0x40f6c1(0x189)]=![],this[_0x40f6c1(0x161)]['inCall']=![],this[_0x40f6c1(0x161)][_0x40f6c1(0x181)]=![],this[_0x40f6c1(0x161)]['isKeypad']=this['lastActiveTab']===this[_0x40f6c1(0x1dd)][_0x40f6c1(0x1f8)],this[_0x40f6c1(0x161)][_0x40f6c1(0x1d8)]=this[_0x40f6c1(0x1c5)]===this[_0x40f6c1(0x1dd)][_0x40f6c1(0x1ab)],this[_0x40f6c1(0x161)][_0x40f6c1(0x104)]=this[_0x40f6c1(0x1c5)]===this[_0x40f6c1(0x1dd)][_0x40f6c1(0x106)],this[_0x40f6c1(0x161)]['isCalls']=this[_0x40f6c1(0x1c5)]===this[_0x40f6c1(0x1dd)][_0x40f6c1(0x13c)],this['state']['isTransfer']=![],this['state']['isForward']=![],this[_0x40f6c1(0x161)]['isCallForwarded']=![],this[_0x40f6c1(0x161)][_0x40f6c1(0x134)]=![],this[_0x40f6c1(0x161)][_0x40f6c1(0x135)]=![],this[_0x40f6c1(0x161)][_0x40f6c1(0x118)]='',this['state'][_0x40f6c1(0x205)]='',this[_0x40f6c1(0x1f1)]['el']['value']=this[_0x40f6c1(0x161)][_0x40f6c1(0x118)],this[_0x40f6c1(0x159)][_0x40f6c1(0x11c)](_0x40f6c1(0x211),{'isDisplay':this['state'][_0x40f6c1(0x1e4)],'inCall':this['state'][_0x40f6c1(0x19a)]}),this['state'][_0x40f6c1(0x1b5)]=this['lastActiveTab'],this[_0x40f6c1(0x1c5)]===this[_0x40f6c1(0x1dd)][_0x40f6c1(0x13c)]&&this['getCalls'](),this[_0x40f6c1(0x154)](),this[_0x40f6c1(0x1a1)]=[],this[_0x40f6c1(0x161)][_0x40f6c1(0x155)]='',this['state'][_0x40f6c1(0x119)]='',this[_0x40f6c1(0x161)][_0x40f6c1(0x125)]=![];}async[a0_0x37cf99(0x188)](_0x3d5df9){const _0x4d2c0a=a0_0x37cf99,_0x39abc8=await this[_0x4d2c0a(0x12c)][_0x4d2c0a(0x1d0)]('res.partner',_0x4d2c0a(0x1b8),[_0x3d5df9]);return _0x39abc8['id']?_0x39abc8:![];}['_OpenPartner'](_0x308586){const _0x2415aa=a0_0x37cf99;this[_0x2415aa(0x1cf)]['doAction']({'res_id':_0x308586,'res_model':_0x2415aa(0x10c),'target':_0x2415aa(0x1b7),'type':_0x2415aa(0x10f),'views':[[![],_0x2415aa(0x131)]]});}async[a0_0x37cf99(0x13e)](_0x26d35b){const _0x851a62=a0_0x37cf99,_0x18146e=await this['getPartner'](_0x26d35b);if(_0x18146e)this[_0x851a62(0x161)][_0x851a62(0x135)]=!![],this[_0x851a62(0x161)][_0x851a62(0x167)]=this[_0x851a62(0x11a)](_0x18146e,_0x26d35b);else{this[_0x851a62(0x161)][_0x851a62(0x135)]=![];const _0x4e540a=await this[_0x851a62(0x184)](_0x26d35b);_0x4e540a?this['state'][_0x851a62(0x167)]=this['computeUserData'](_0x4e540a,_0x26d35b):this['state'][_0x851a62(0x167)]={'phoneNumber':_0x26d35b};}return _0x18146e;}['computePartnerData'](_0x136678,_0x3e6e59){const _0x5d9f8e=a0_0x37cf99;return{'partnerId':_0x136678['id'],'partnerName':_0x136678[_0x5d9f8e(0x1f3)],'partnerIconUrl':this[_0x5d9f8e(0x11f)](_0x136678['id']),'partnerUrl':this[_0x5d9f8e(0x1ce)](_0x136678['id']),'phoneNumber':_0x3e6e59};}['computePartnerUrl'](_0x595296){const _0x4a5bda=a0_0x37cf99;return _0x4a5bda(0x13f)+_0x595296+_0x4a5bda(0x1a4);}[a0_0x37cf99(0x11f)](_0x47c6fa){const _0x982264=a0_0x37cf99;return _0x982264(0x107)+_0x47c6fa;}async[a0_0x37cf99(0x184)](_0x4a1a0a){const _0x471098=a0_0x37cf99;return await this['orm'][_0x471098(0x1d0)](_0x471098(0x13b),_0x471098(0x1be),[_0x4a1a0a]);}['computeUserData'](_0x146fdf,_0x2e49aa){const _0x43c8a6=a0_0x37cf99;return{'partnerId':_0x146fdf['id'],'partnerName':_0x146fdf['name'],'partnerIconUrl':this[_0x43c8a6(0x197)](_0x146fdf[_0x43c8a6(0x168)][0x0]),'phoneNumber':_0x2e49aa};}['computeUserIconUrl'](_0x532eff){const _0x323748=a0_0x37cf99;return _0x323748(0x1bf)+_0x532eff;}['createCallCounter'](_0x40f6c3){const _0x5bb62d=a0_0x37cf99,_0x43bf69=this;_0x43bf69['callDuration']=0x0,_0x43bf69[_0x5bb62d(0x161)][_0x5bb62d(0x162)]='00:00:00',_0x43bf69[_0x5bb62d(0x145)]=setInterval(()=>{const _0x3c537a=_0x5bb62d;_0x43bf69[_0x3c537a(0x14b)]+=0x1,_0x43bf69['state'][_0x3c537a(0x167)]['phoneNumber']===_0x40f6c3&&(_0x43bf69[_0x3c537a(0x161)][_0x3c537a(0x162)]=new Date(_0x43bf69[_0x3c537a(0x14b)]*0x3e8)[_0x3c537a(0x1c9)]()['substring'](0xb,0x13));},0x3e8);}[a0_0x37cf99(0x154)](){const _0x239a17=a0_0x37cf99,_0x40d21f=this;_0x40d21f[_0x239a17(0x161)][_0x239a17(0x162)]='',clearInterval(_0x40d21f['callDurationTimerInstance']);}[a0_0x37cf99(0x143)](){const _0x42709a=a0_0x37cf99;this['lastActiveTab']=this['state'][_0x42709a(0x1b5)];}[a0_0x37cf99(0x186)](){const _0x3eb1d2=a0_0x37cf99;this[_0x3eb1d2(0x161)][_0x3eb1d2(0x1b1)]?(this[_0x3eb1d2(0x161)][_0x3eb1d2(0x1e4)]=!this['state'][_0x3eb1d2(0x1e4)],this['state']['inCall']?(this[_0x3eb1d2(0x161)]['isKeypad']=![],this[_0x3eb1d2(0x161)]['isDialingPanel']=!![],this[_0x3eb1d2(0x161)][_0x3eb1d2(0x1d8)]=![],this[_0x3eb1d2(0x161)]['isCalls']=![],this[_0x3eb1d2(0x161)][_0x3eb1d2(0x1b5)]=this[_0x3eb1d2(0x1dd)][_0x3eb1d2(0x1f8)],this[_0x3eb1d2(0x159)][_0x3eb1d2(0x11c)](_0x3eb1d2(0x1fa),{'isDisplay':this['state'][_0x3eb1d2(0x1e4)],'inCall':this[_0x3eb1d2(0x161)][_0x3eb1d2(0x19a)]})):setFocus(this[_0x3eb1d2(0x1f1)]['el'])):this[_0x3eb1d2(0x1b3)](_0x3eb1d2(0x20b),{'sticky':![]});}['getCalls'](){const _0x3431c8=a0_0x37cf99;this[_0x3431c8(0x159)][_0x3431c8(0x11c)](_0x3431c8(0x120));}[a0_0x37cf99(0x173)](_0x5ecd9e){const _0x22035f=a0_0x37cf99;if(this[_0x22035f(0x161)][_0x22035f(0x118)]){if(!this['sipRegistered']){this['notify'](_0x22035f(0x1e6),{'title':_0x22035f(0x10b),'sticky':![]});return;}this['state'][_0x22035f(0x140)]=this['state']['phoneNumber'],this[_0x22035f(0x161)][_0x22035f(0x118)]='',this[_0x22035f(0x1f1)]['el'][_0x22035f(0x1a2)]=this['state'][_0x22035f(0x118)],this[_0x22035f(0x209)]({'phone':this[_0x22035f(0x161)][_0x22035f(0x140)]});}else this['notify'](_0x22035f(0x1b6),{'sticky':![]});}[a0_0x37cf99(0x18f)](_0x34ae37){const _0x236b01=a0_0x37cf99;this[_0x236b01(0x209)]({'phone':_0x34ae37});}['_onClickPhone'](_0x5e43b8){const _0x49872b=a0_0x37cf99;this[_0x49872b(0x161)][_0x49872b(0x1b5)]=this[_0x49872b(0x1dd)]['phone'],this[_0x49872b(0x143)](),this['state']['inCall']?(this[_0x49872b(0x161)][_0x49872b(0x111)]=![],this['state'][_0x49872b(0x189)]=!![]):(this['state'][_0x49872b(0x111)]=!![],this[_0x49872b(0x161)][_0x49872b(0x189)]=![]),this[_0x49872b(0x161)][_0x49872b(0x1d8)]=![],this[_0x49872b(0x161)][_0x49872b(0x1f2)]=![],this['state']['isFavorites']=![],setFocus(this['phoneInput']['el']);}[a0_0x37cf99(0x1f9)](_0x2a0c33){const _0x2d250d=a0_0x37cf99;this[_0x2d250d(0x161)]['activeTab']=this[_0x2d250d(0x1dd)][_0x2d250d(0x1ab)],this[_0x2d250d(0x143)](),this[_0x2d250d(0x161)][_0x2d250d(0x111)]=![],this['state']['isContacts']=!![],this['state'][_0x2d250d(0x104)]=![],this[_0x2d250d(0x161)][_0x2d250d(0x1f2)]=![],this[_0x2d250d(0x161)]['isDialingPanel']=![];}['_onClickFavorites'](_0x2e6d4f){const _0x392c3f=a0_0x37cf99;this[_0x392c3f(0x161)]['activeTab']=this[_0x392c3f(0x1dd)]['favorites'],this[_0x392c3f(0x143)](),this[_0x392c3f(0x161)][_0x392c3f(0x111)]=![],this[_0x392c3f(0x161)]['isContacts']=![],this[_0x392c3f(0x161)][_0x392c3f(0x104)]=!![],this[_0x392c3f(0x161)][_0x392c3f(0x1f2)]=![],this['state'][_0x392c3f(0x189)]=![];}[a0_0x37cf99(0x1cb)](_0x2157c7){const _0x5f139c=a0_0x37cf99;this[_0x5f139c(0x161)][_0x5f139c(0x1b5)]=this['tabs'][_0x5f139c(0x13c)],this[_0x5f139c(0x143)](),this[_0x5f139c(0x161)]['isKeypad']=![],this['state'][_0x5f139c(0x1d8)]=![],this[_0x5f139c(0x161)][_0x5f139c(0x104)]=![],this[_0x5f139c(0x161)][_0x5f139c(0x1f2)]=!![],this['state']['isDialingPanel']=![],this['getCalls']();}[a0_0x37cf99(0x190)](_0x3428f2){const _0x5d5c91=a0_0x37cf99;this[_0x5d5c91(0x161)]['activeTab']=this[_0x5d5c91(0x1dd)][_0x5d5c91(0x1f8)],this[_0x5d5c91(0x161)][_0x5d5c91(0x1d8)]=![],this[_0x5d5c91(0x161)][_0x5d5c91(0x11d)]=![],this[_0x5d5c91(0x161)][_0x5d5c91(0x1b0)]=![],this[_0x5d5c91(0x161)][_0x5d5c91(0x1f2)]=![],this[_0x5d5c91(0x161)][_0x5d5c91(0x111)]=![],this[_0x5d5c91(0x161)][_0x5d5c91(0x189)]=!![];}['_onClickKeypad'](_0x4f0005){const _0x56aced=a0_0x37cf99;this[_0x56aced(0x161)][_0x56aced(0x1b5)]=this['tabs'][_0x56aced(0x1f8)],this[_0x56aced(0x161)][_0x56aced(0x1d8)]=![],this[_0x56aced(0x161)][_0x56aced(0x11d)]=![],this[_0x56aced(0x161)]['isForward']=![],this['state'][_0x56aced(0x1f2)]=![],this[_0x56aced(0x161)]['isKeypad']=!![],this['state']['isDialingPanel']=![],setFocus(this[_0x56aced(0x1f1)]['el']);}[a0_0x37cf99(0x1c3)](_0x718e92){const _0x32e8f9=a0_0x37cf99;if(this['state'][_0x32e8f9(0x11d)])return;this[_0x32e8f9(0x161)][_0x32e8f9(0x1b0)]=![],this[_0x32e8f9(0x161)][_0x32e8f9(0x111)]=![],this[_0x32e8f9(0x161)][_0x32e8f9(0x189)]=![],this[_0x32e8f9(0x161)][_0x32e8f9(0x1d8)]=!![],this[_0x32e8f9(0x161)][_0x32e8f9(0x11d)]=!![],this['bus'][_0x32e8f9(0x11c)](_0x32e8f9(0x175),{'isTransfer':!![]});}[a0_0x37cf99(0x153)](_0x1cf39e){const _0x1a5841=a0_0x37cf99;if(this['state']['isForward'])return;this['state'][_0x1a5841(0x11d)]=![],this[_0x1a5841(0x161)]['isKeypad']=![],this[_0x1a5841(0x161)]['isDialingPanel']=![],this[_0x1a5841(0x161)][_0x1a5841(0x1b0)]=!![],this[_0x1a5841(0x161)][_0x1a5841(0x1d8)]=!![],this[_0x1a5841(0x159)][_0x1a5841(0x11c)]('busContactSetState',{'isForward':!![]});}[a0_0x37cf99(0x170)](_0x494c2a){const _0x49accd=a0_0x37cf99;this['session']&&(this[_0x49accd(0x161)][_0x49accd(0x134)]?this[_0x49accd(0x176)][_0x49accd(0x1fc)]():this[_0x49accd(0x176)][_0x49accd(0x192)]()),this[_0x49accd(0x161)]['isMicrophoneMute']=!this[_0x49accd(0x161)][_0x49accd(0x134)],this['bc'][_0x49accd(0x121)]({'event':_0x49accd(0x1f5),'params':{'mute':this['state']['isMicrophoneMute']}});}[a0_0x37cf99(0x19d)](_0x46da64){const _0x5ded63=a0_0x37cf99;this[_0x5ded63(0x161)][_0x5ded63(0x20f)]=!this[_0x5ded63(0x161)][_0x5ded63(0x20f)],localStorage[_0x5ded63(0x129)](_0x5ded63(0x1ca),''+this[_0x5ded63(0x161)][_0x5ded63(0x20f)]),this['bc']['postMessage']({'event':_0x5ded63(0x1ed),'params':{'mute':this[_0x5ded63(0x161)][_0x5ded63(0x20f)]}}),this['setIncomingVolume']();}async['_onClickEndCall'](_0x34ccd8){const _0xb17630=a0_0x37cf99;this[_0xb17630(0x176)]&&(this[_0xb17630(0x109)]=!![],this[_0xb17630(0x176)][_0xb17630(0x1fe)]()),this['bc']['postMessage']({'event':_0xb17630(0x18c)}),this[_0xb17630(0x161)][_0xb17630(0x15c)]=this[_0xb17630(0x17b)][_0xb17630(0x14e)],await this[_0xb17630(0x19f)](),this[_0xb17630(0x1c5)]===this['tabs'][_0xb17630(0x1f8)]&&setFocus(this[_0xb17630(0x1f1)]['el']);}['_onClickAcceptIncoming'](_0x5ad027){const _0x3a7bad=a0_0x37cf99;this[_0x3a7bad(0x176)]&&this[_0x3a7bad(0x176)][_0x3a7bad(0x180)]();const _0x235142=this[_0x3a7bad(0x1dc)]();this['bc'][_0x3a7bad(0x121)]({'event':_0x3a7bad(0x1c2),'params':_0x235142}),this[_0x3a7bad(0x161)]['phone_status']=this[_0x3a7bad(0x17b)][_0x3a7bad(0x10e)],this[_0x3a7bad(0x161)]['inIncoming']=![],this['startCall']();}async[a0_0x37cf99(0x17a)](_0x1cdef3){const _0x5037bf=a0_0x37cf99;this['session']&&(this['supressBroadcastChannel']=!![],this['session'][_0x5037bf(0x1fe)]()),this['bc'][_0x5037bf(0x121)]({'event':_0x5037bf(0x18c)}),this[_0x5037bf(0x161)][_0x5037bf(0x181)]=![],await this[_0x5037bf(0x19f)](),this[_0x5037bf(0x1c5)]===this[_0x5037bf(0x1dd)]['phone']&&setFocus(this['phoneInput']['el']);}['_onClickClose'](_0x377453){const _0x54a288=a0_0x37cf99;this[_0x54a288(0x161)][_0x54a288(0x171)]=!this['state']['isDisplay'],this[_0x54a288(0x186)]();}[a0_0x37cf99(0x174)](_0x3221b4){const _0x3310da=a0_0x37cf99;this[_0x3310da(0x161)]['inCall']?this[_0x3310da(0x176)]?this[_0x3310da(0x14f)](_0x3221b4[_0x3310da(0x13a)][_0x3310da(0x19c)]):this['bc'][_0x3310da(0x121)]({'event':_0x3310da(0x204),'params':{'key':_0x3221b4[_0x3310da(0x13a)]['textContent']}}):(this['state'][_0x3310da(0x118)]+=_0x3221b4[_0x3310da(0x13a)][_0x3310da(0x19c)],this[_0x3310da(0x1f1)]['el'][_0x3310da(0x1a2)]=this['state'][_0x3310da(0x118)]),this['phoneInput']['el'][_0x3310da(0x115)]();}['_onClickBackSpace'](_0x3d2dca){const _0x364d92=a0_0x37cf99;setFocus(this[_0x364d92(0x1f1)]['el']),this[_0x364d92(0x161)][_0x364d92(0x118)]=this['state'][_0x364d92(0x118)]['slice'](0x0,-0x1),this[_0x364d92(0x1f1)]['el'][_0x364d92(0x1a2)]=this['state'][_0x364d92(0x118)];this['state'][_0x364d92(0x1d1)]&&this[_0x364d92(0x159)][_0x364d92(0x11c)]('busContactSearchQuery',{'searchQuery':this[_0x364d92(0x1f1)]['el'][_0x364d92(0x1a2)]});if(this['state']['phoneNumber']==='')this[_0x364d92(0x161)][_0x364d92(0x1d1)]=![];}[a0_0x37cf99(0x14f)](_0x26464f){const _0x47aec0=a0_0x37cf99,_0x2bcf69=['0','1','2','3','4','5','6','7','8','9','*','#'];_0x2bcf69[_0x47aec0(0x114)](_0x26464f)&&(dialTone(_0x26464f),this[_0x47aec0(0x176)][_0x47aec0(0x14f)](_0x26464f));}[a0_0x37cf99(0x12d)](_0x335f97){const _0x26c993=a0_0x37cf99;this[_0x26c993(0x161)][_0x26c993(0x19a)]?this[_0x26c993(0x14f)](_0x335f97[_0x26c993(0x15f)]):_0x335f97['key']==='Enter'?this[_0x26c993(0x173)]():(this[_0x26c993(0x1f1)]['el'][_0x26c993(0x1a2)]=this[_0x26c993(0x1f1)]['el'][_0x26c993(0x1a2)][_0x26c993(0x1b4)](/\(|\)|-| /gm,''),this['state'][_0x26c993(0x118)]=this['phoneInput']['el'][_0x26c993(0x1a2)],this[_0x26c993(0x161)][_0x26c993(0x1d1)]=this[_0x26c993(0x161)]['phoneNumber']!=='',this[_0x26c993(0x159)]['trigger'](_0x26c993(0x183),{'searchQuery':this[_0x26c993(0x1f1)]['el'][_0x26c993(0x1a2)]}));}[a0_0x37cf99(0x16e)](){const _0xfe0f08=a0_0x37cf99,_0x148791={'default_phone':this[_0xfe0f08(0x161)][_0xfe0f08(0x167)][_0xfe0f08(0x118)],'call_id':this[_0xfe0f08(0x1fd)],'default_name':_0xfe0f08(0x1ec)+this[_0xfe0f08(0x161)][_0xfe0f08(0x167)][_0xfe0f08(0x118)]};this[_0xfe0f08(0x1cf)]['doAction']({'context':_0x148791,'res_model':_0xfe0f08(0x10c),'target':_0xfe0f08(0x16b),'type':'ir.actions.act_window','views':[[![],_0xfe0f08(0x131)]]});}[a0_0x37cf99(0x1ad)](){const _0x3319fe=a0_0x37cf99;this[_0x3319fe(0x161)]['isCallForwarded']=![],this[_0x3319fe(0x176)]?this[_0x3319fe(0x176)][_0x3319fe(0x14f)](this[_0x3319fe(0x165)]):this['bc'][_0x3319fe(0x121)]({'event':_0x3319fe(0x149)});}}